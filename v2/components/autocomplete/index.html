<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Autocomplete - CORE Design System v2</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- ZENTRALES CSS SYSTEM -->
    <link rel="stylesheet" href="/shared/master.css">
    
    <!-- ZENTRALE JAVASCRIPT INTERAKTIONEN -->
    <script src="/shared/interactions.js"></script>
    <!-- HEROUI-INSPIRIERTE DROPDOWN-LÃ–SUNG -->
    <script src="/shared/heroui-inspired-dropdowns.js"></script>
    
    <style>
        /* NUR AUTOCOMPLETE-SPEZIFISCHE STYLES */
        .core-autocomplete {
            position: relative;
            width: 100%;
        }
        
        .core-autocomplete-input {
            width: 100%;
            padding: 12px 40px 12px 16px;
            font-size: var(--font-size-base);
            border: 1px solid var(--core-line);
            border-radius: var(--radius-md);
            background: white;
            color: var(--core-text);
            transition: all var(--transition-base);
        }
        
        .core-autocomplete-input:focus {
            outline: none;
            border-color: var(--orange-primary);
            box-shadow: 0 0 0 3px rgba(0, 102, 255, 0.1);
        }
        
        .core-autocomplete-icon {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            color: var(--core-grey);
            pointer-events: none;
        }
        
        .core-autocomplete-dropdown {
            position: absolute;
            top: calc(100% + 4px);
            left: 0;
            right: 0;
            background: white;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-lg);
            max-height: 300px;
            overflow-y: auto;
            z-index: var(--z-dropdown);
            display: none;
        }
        
        .core-autocomplete-dropdown.open {
            display: block;
        }
        
        .core-autocomplete-item {
            padding: 12px 16px;
            cursor: pointer;
            transition: background 0.2s ease;
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }
        
        .core-autocomplete-item:hover {
            background: var(--core-gray-100);
        }
        
        .core-autocomplete-item.selected {
            background: var(--core-accent);
        }
        
        .core-autocomplete-item.active {
            background: var(--orange-primary);
            color: white;
        }
        
        .core-autocomplete-item-icon {
            width: 20px;
            height: 20px;
            color: var(--orange-primary);
        }
        
        .core-autocomplete-item.active .core-autocomplete-item-icon {
            color: white;
        }
        
        .core-autocomplete-item-text {
            flex: 1;
        }
        
        .core-autocomplete-item-primary {
            font-size: var(--font-size-base);
            font-weight: var(--font-weight-medium);
            color: var(--core-text);
            display: block;
        }
        
        .core-autocomplete-item.active .core-autocomplete-item-primary {
            color: white;
        }
        
        .core-autocomplete-item-secondary {
            font-size: var(--font-size-sm);
            color: var(--core-grey);
            display: block;
            margin-top: 2px;
        }
        
        .core-autocomplete-item.active .core-autocomplete-item-secondary {
            color: rgba(255, 255, 255, 0.8);
        }
        
        .core-autocomplete-highlight {
            font-weight: var(--font-weight-bold);
            color: var(--orange-primary);
        }
        
        .core-autocomplete-item.active .core-autocomplete-highlight {
            color: white;
        }
        
        .core-autocomplete-empty {
            padding: 24px;
            text-align: center;
            color: var(--core-grey);
            font-size: var(--font-size-sm);
        }
        
        .core-autocomplete-loading {
            padding: 24px;
            text-align: center;
        }
        
        .core-autocomplete-spinner {
            width: 24px;
            height: 24px;
            border: 3px solid var(--core-gray-200);
            border-top-color: var(--orange-primary);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin: 0 auto;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Group Headers */
        .core-autocomplete-group {
            padding: 8px 16px;
            font-size: var(--font-size-xs);
            font-weight: var(--font-weight-semibold);
            color: var(--core-grey);
            text-transform: uppercase;
            background: var(--core-gray-100);
            border-bottom: 1px solid var(--core-line);
        }
        
        /* Chips for multi-select */
        .core-autocomplete-chips {
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-sm);
        }
        
        .core-autocomplete-chip {
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-xs);
            padding: 4px 12px;
            background: var(--core-accent);
            border-radius: var(--radius-full);
            font-size: var(--font-size-sm);
        }
        
        .core-autocomplete-chip-remove {
            width: 16px;
            height: 16px;
            cursor: pointer;
            color: var(--core-grey);
            transition: color 0.2s ease;
        }
        
        .core-autocomplete-chip-remove:hover {
            color: var(--core-error);
        }
    </style>
</head>
<body>
    <div class="sidebar">
        <div class="sidebar-header">
            <div class="core-logo-text">CORE</div>            <div class="logo-subtitle">Design System v2</div>
        </div>
        
        <nav>
            <div class="nav-section">
                <div class="nav-section-title">Design Principles</div>
                <a href="/design-principles/overview/" class="nav-item">Overview</a>
                <a href="/design-principles/colors/" class="nav-item">Colors</a>
                <a href="/design-principles/typography/" class="nav-item">Typography</a>
                <a href="/design-principles/grid/" class="nav-item">Grid</a>
                <a href="/design-principles/spacing/" class="nav-item">Spacing</a>
            </div>
            
            <div class="nav-section">
                <div class="nav-section-title">Implementation Guide</div>
                <a href="/implementation/overview/" class="nav-item">Overview</a>
                <a href="/implementation/css/" class="nav-item">CSS Architecture</a>
                <a href="/implementation/nextjs/" class="nav-item">Next.js Integration</a>
            </div>
            
            <div class="nav-section">
                <div class="nav-section-title">Components</div>
                <a href="/components/overview/" class="nav-item">Overview</a>
                <a href="/components/buttons/" class="nav-item">Button</a>
                <a href="/components/inputs/" class="nav-item">Input</a>
                <a href="/components/cards/" class="nav-item">Card</a>
                <a href="/components/select/" class="nav-item">Select</a>
                <a href="/components/accordion/" class="nav-item">Accordion</a>
                <a href="/components/modal/" class="nav-item">Modal</a>
                <a href="/components/dropdown/" class="nav-item">Dropdown</a>
                <a href="/components/checkbox/" class="nav-item">Checkbox</a>
                <a href="/components/radio/" class="nav-item">Radio</a>
                <a href="/components/toast/" class="nav-item">Toast</a>
                <a href="/components/table/" class="nav-item">Table</a>
                <a href="/components/textarea/" class="nav-item">Textarea</a>
                <a href="/components/switch/" class="nav-item">Switch</a>
                <a href="/components/slider/" class="nav-item">Slider</a>
                <a href="/components/alert/" class="nav-item">Alert</a>
                <a href="/components/badge/" class="nav-item">Badge</a>
                <a href="/components/date-picker/" class="nav-item">Date Picker</a>
                <a href="/components/avatar/" class="nav-item">Avatar</a>
                <a href="/components/navbar/" class="nav-item">Navbar</a>
                <a href="/components/tabs/" class="nav-item">Tabs</a>
                <a href="/components/progress/" class="nav-item">Progress</a>
                <a href="/components/calendar/" class="nav-item">Calendar</a>
                <a href="/components/autocomplete/" class="nav-item active">Autocomplete</a>
                <a href="/components/pagination/" class="nav-item">Pagination</a>
                <a href="/components/tooltip/" class="nav-item">Tooltip</a>
                <a href="/components/spinner/" class="nav-item">Spinner</a>
                </div>
        </nav>
    </div>
    
    <main class="main-content">
        <h1>Autocomplete</h1>
        <p>Intelligent search input with suggestions for locations, items, and more.</p>
        
        <!-- Section 1: Basic Autocomplete -->
        <section class="section">
            <h2 class="section-title">Basic Autocomplete</h2>
            
            <div class="component-card">
                <h3>Location Search</h3>
                <div class="core-input-group">
                    <label class="core-input-label">Search Location</label>
                    <div class="core-autocomplete">
                        <input type="text" class="core-autocomplete-input" placeholder="Type to search..." value="Mun">
                        <svg class="core-autocomplete-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                        </svg>
                        
                        <div class="core-autocomplete-dropdown open">
                            <div class="core-autocomplete-item active">
                                <svg class="core-autocomplete-item-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                                </svg>
                                <div class="core-autocomplete-item-text">
                                    <span class="core-autocomplete-item-primary"><span class="core-autocomplete-highlight">Mun</span>ich</span>
                                    <span class="core-autocomplete-item-secondary">Bavaria, Germany</span>
                                </div>
                            </div>
                            
                            <div class="core-autocomplete-item">
                                <svg class="core-autocomplete-item-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                                </svg>
                                <div class="core-autocomplete-item-text">
                                    <span class="core-autocomplete-item-primary"><span class="core-autocomplete-highlight">Mun</span>ster</span>
                                    <span class="core-autocomplete-item-secondary">North Rhine-Westphalia, Germany</span>
                                </div>
                            </div>
                            
                            <div class="core-autocomplete-item">
                                <svg class="core-autocomplete-item-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                                </svg>
                                <div class="core-autocomplete-item-text">
                                    <span class="core-autocomplete-item-primary"><span class="core-autocomplete-highlight">Mun</span>ich Airport</span>
                                    <span class="core-autocomplete-item-secondary">Freising, Bavaria</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="component-card">
                <h3>Empty State</h3>
                <div class="core-input-group">
                    <label class="core-input-label">Search items</label>
                    <div class="core-autocomplete">
                        <input type="text" class="core-autocomplete-input" placeholder="Type to search..." value="xyz">
                        <svg class="core-autocomplete-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                        </svg>
                        
                        <div class="core-autocomplete-dropdown open">
                            <div class="core-autocomplete-empty">
                                No results found for "xyz"
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="component-card">
                <h3>Loading State</h3>
                <div class="core-input-group">
                    <label class="core-input-label">Search</label>
                    <div class="core-autocomplete">
                        <input type="text" class="core-autocomplete-input" placeholder="Type to search..." value="Searching...">
                        <svg class="core-autocomplete-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                        </svg>
                        
                        <div class="core-autocomplete-dropdown open">
                            <div class="core-autocomplete-loading">
                                <div class="core-autocomplete-spinner"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Section 2: Grouped Results -->
        <section class="section">
            <h2 class="section-title">Grouped Results</h2>
            
            <div class="component-card">
                <h3>item Search with Categories</h3>
                <div class="core-input-group">
                    <label class="core-input-label">Search items</label>
                    <div class="core-autocomplete">
                        <input type="text" class="core-autocomplete-input" placeholder="Type to search..." value="Premium">
                        <svg class="core-autocomplete-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                        </svg>

                        <div class="core-autocomplete-dropdown open">
                            <div class="core-autocomplete-group">items</div>
                            <div class="core-autocomplete-item">
                                <div class="core-autocomplete-item-text">
                                    <span class="core-autocomplete-item-primary"><span class="core-autocomplete-highlight">Premium</span> Product A</span>
                                    <span class="core-autocomplete-item-secondary">â‚¬2,500 â€¢ Large size</span>
                                </div>
                            </div>
                            <div class="core-autocomplete-item">
                                <div class="core-autocomplete-item-text">
                                    <span class="core-autocomplete-item-primary"><span class="core-autocomplete-highlight">Premium</span> Product B</span>
                                    <span class="core-autocomplete-item-secondary">â‚¬1,800 â€¢ Medium size</span>
                                </div>
                            </div>

                            <div class="core-autocomplete-group">Locations</div>
                            <div class="core-autocomplete-item">
                                <div class="core-autocomplete-item-text">
                                    <span class="core-autocomplete-item-primary"><span class="core-autocomplete-highlight">Premium</span> Store Munich</span>
                                    <span class="core-autocomplete-item-secondary">Germany</span>
                                </div>
                            </div>

                            <div class="core-autocomplete-group">Team</div>
                            <div class="core-autocomplete-item">
                                <div class="core-autocomplete-item-text">
                                    <span class="core-autocomplete-item-primary">John <span class="core-autocomplete-highlight">Premium</span>son</span>
                                    <span class="core-autocomplete-item-secondary">Senior team member</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Section 3: Multi-Select -->
        <section class="section">
            <h2 class="section-title">Multi-Select Autocomplete</h2>
            
            <div class="component-card">
                <h3>item Features</h3>
                <div class="core-input-group">
                    <label class="core-input-label">Select Features</label>
                    
                    <div class="core-autocomplete-chips">
                        <div class="core-autocomplete-chip">
                            Feature A
                            <svg class="core-autocomplete-chip-remove" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                            </svg>
                        </div>
                        <div class="core-autocomplete-chip">
                            Feature B
                            <svg class="core-autocomplete-chip-remove" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                            </svg>
                        </div>
                        <div class="core-autocomplete-chip">
                            Feature C
                            <svg class="core-autocomplete-chip-remove" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                            </svg>
                        </div>
                    </div>
                    
                    <div class="core-autocomplete">
                        <input type="text" class="core-autocomplete-input" placeholder="Add more features...">
                        <svg class="core-autocomplete-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
                        </svg>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Section 4: Implementation Guide -->
        <section class="section">
            <h2 class="section-title">Implementation Guide</h2>
            
            <div class="implementation-section">
                <h3>HTML Structure</h3>
                <div class="code-block">
                    <pre>&lt;!-- Autocomplete --&gt;
&lt;div class="core-autocomplete"&gt;
    &lt;input type="text" class="core-autocomplete-input" 
           placeholder="Type to search..."&gt;
    &lt;svg class="core-autocomplete-icon"&gt;...&lt;/svg&gt;
    
    &lt;div class="core-autocomplete-dropdown"&gt;
        &lt;!-- Grouped Results --&gt;
        &lt;div class="core-autocomplete-group"&gt;items&lt;/div&gt;
        
        &lt;div class="core-autocomplete-item"&gt;
            &lt;svg class="core-autocomplete-item-icon"&gt;...&lt;/svg&gt;
            &lt;div class="core-autocomplete-item-text"&gt;
                &lt;span class="core-autocomplete-item-primary"&gt;
                    &lt;span class="core-autocomplete-highlight"&gt;Mun&lt;/span&gt;ich
                &lt;/span&gt;
                &lt;span class="core-autocomplete-item-secondary"&gt;
                    Bavaria, Germany
                &lt;/span&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;</pre>
                </div>
                
                <h3>React/Next.js Component</h3>
                <div class="code-block">
                    <pre>// components/Autocomplete.tsx
import { useState, useRef, useEffect } from 'react';

interface AutocompleteOption {
  id: string;
  label: string;
  sublabel?: string;
  group?: string;
  icon?: React.ReactNode;
}

interface AutocompleteProps {
  options: AutocompleteOption[];
  placeholder?: string;
  value?: string;
  onChange?: (value: string) => void;
  onSelect?: (option: AutocompleteOption) => void;
  loading?: boolean;
  multiSelect?: boolean;
}

export const Autocomplete = ({
  options,
  placeholder = 'Type to search...',
  value = '',
  onChange,
  onSelect,
  loading = false,
  multiSelect = false
}: AutocompleteProps) => {
  const [isOpen, setIsOpen] = useState(false);
  const [searchValue, setSearchValue] = useState(value);
  const [selectedOptions, setSelectedOptions] = useState<AutocompleteOption[]>([]);
  const [activeIndex, setActiveIndex] = useState(0);
  const ref = useRef<HTMLDivElement>(null);
  
  const filteredOptions = options.filter(option =>
    option.label.toLowerCase().includes(searchValue.toLowerCase())
  );
  
  const groupedOptions = filteredOptions.reduce((acc, option) => {
    const group = option.group || 'Results';
    if (!acc[group]) acc[group] = [];
    acc[group].push(option);
    return acc;
  }, {} as Record<string, AutocompleteOption[]>);
  
  const handleSelect = (option: AutocompleteOption) => {
    if (multiSelect) {
      setSelectedOptions([...selectedOptions, option]);
      setSearchValue('');
    } else {
      setSearchValue(option.label);
      onSelect?.(option);
    }
    setIsOpen(false);
  };
  
  const highlightMatch = (text: string) => {
    const parts = text.split(new RegExp(`(${searchValue})`, 'gi'));
    return parts.map((part, i) => 
      part.toLowerCase() === searchValue.toLowerCase() ? 
        &lt;span key={i} className="core-autocomplete-highlight"&gt;{part}&lt;/span&gt; : 
        part
    );
  };
  
  return (
    &lt;div className="core-autocomplete" ref={ref}&gt;
      {multiSelect && selectedOptions.length > 0 && (
        &lt;div className="core-autocomplete-chips"&gt;
          {selectedOptions.map(option => (
            &lt;div key={option.id} className="core-autocomplete-chip"&gt;
              {option.label}
              &lt;svg 
                className="core-autocomplete-chip-remove"
                onClick={() => /* remove chip */}
              &gt;...&lt;/svg&gt;
            &lt;/div&gt;
          ))}
        &lt;/div&gt;
      )}
      
      &lt;input
        type="text"
        className="core-autocomplete-input"
        placeholder={placeholder}
        value={searchValue}
        onChange={(e) => {
          setSearchValue(e.target.value);
          onChange?.(e.target.value);
          setIsOpen(true);
        }}
        onFocus={() => setIsOpen(true)}
      /&gt;
      
      {isOpen && (
        &lt;div className="core-autocomplete-dropdown open"&gt;
          {loading ? (
            &lt;div className="core-autocomplete-loading"&gt;
              &lt;div className="core-autocomplete-spinner" /&gt;
            &lt;/div&gt;
          ) : filteredOptions.length === 0 ? (
            &lt;div className="core-autocomplete-empty"&gt;
              No results found
            &lt;/div&gt;
          ) : (
            Object.entries(groupedOptions).map(([group, items]) => (
              &lt;div key={group}&gt;
                {Object.keys(groupedOptions).length > 1 && (
                  &lt;div className="core-autocomplete-group"&gt;{group}&lt;/div&gt;
                )}
                {items.map((option, index) => (
                  &lt;div
                    key={option.id}
                    className={`core-autocomplete-item ${
                      index === activeIndex ? 'active' : ''
                    }`}
                    onClick={() => handleSelect(option)}
                  &gt;
                    {option.icon}
                    &lt;div className="core-autocomplete-item-text"&gt;
                      &lt;span className="core-autocomplete-item-primary"&gt;
                        {highlightMatch(option.label)}
                      &lt;/span&gt;
                      {option.sublabel && (
                        &lt;span className="core-autocomplete-item-secondary"&gt;
                          {option.sublabel}
                        &lt;/span&gt;
                      )}
                    &lt;/div&gt;
                  &lt;/div&gt;
                ))}
              &lt;/div&gt;
            ))
          )}
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );
};</pre>
                </div>
            </div>
        </section>
        
        <!-- Section 5: API Reference -->
        <section class="section">
            <h2 class="section-title">API Reference</h2>
            
            <table class="api-table">
                <thead>
                    <tr>
                        <th>Class</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>.core-autocomplete</code></td>
                        <td>Container for autocomplete</td>
                    </tr>
                    <tr>
                        <td><code>.core-autocomplete-input</code></td>
                        <td>Search input field</td>
                    </tr>
                    <tr>
                        <td><code>.core-autocomplete-dropdown</code></td>
                        <td>Dropdown container</td>
                    </tr>
                    <tr>
                        <td><code>.core-autocomplete-item</code></td>
                        <td>Individual result item</td>
                    </tr>
                    <tr>
                        <td><code>.core-autocomplete-group</code></td>
                        <td>Group header</td>
                    </tr>
                    <tr>
                        <td><code>.core-autocomplete-highlight</code></td>
                        <td>Highlighted search match</td>
                    </tr>
                    <tr>
                        <td><code>.core-autocomplete-chips</code></td>
                        <td>Multi-select chips container</td>
                    </tr>
                    <tr>
                        <td><code>.core-autocomplete-chip</code></td>
                        <td>Selected item chip</td>
                    </tr>
                    <tr>
                        <td><code>.active</code></td>
                        <td>Active/focused item</td>
                    </tr>
                    <tr>
                        <td><code>.selected</code></td>
                        <td>Selected item</td>
                    </tr>
                </tbody>
            </table>
        </section>
    </main>
</body>
</html>
